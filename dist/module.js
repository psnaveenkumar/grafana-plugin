/*! For license information please see module.js.LICENSE.txt */
define(["react","@grafana/ui","@grafana/data","@grafana/runtime","lodash"],(function(e,t,a,n,o){return function(e){var t={};function a(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/",a(a.s=5)}([function(t,a){t.exports=e},function(e,a){e.exports=t},function(e,t){e.exports=a},function(e,t){e.exports=n},function(e,t){e.exports=o},function(e,t,a){"use strict";a.r(t);var n=a(2),o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)};function r(e,t){function a(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}var s=function(){return(s=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};var i,l,u=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t}(a(3).DataSourceWithBackend),c=a(0),m=a.n(c),p=a(1),h=p.LegacyForms.SecretFormField,f=p.LegacyForms.FormField,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onBootstrapServersChange=function(e){var a=t.props,n=a.onOptionsChange,o=a.options,r=s(s({},o.jsonData),{bootstrapServers:e.target.value});n(s(s({},o),{jsonData:r}))},t.onSecurityProtocolChange=function(e){var a=t.props,n=a.onOptionsChange,o=a.options,r=s(s({},o.jsonData),{securityProtocol:e.target.value});n(s(s({},o),{jsonData:r}))},t.onSaslMechanismsChange=function(e){var a=t.props,n=a.onOptionsChange,o=a.options,r=s(s({},o.jsonData),{saslMechanisms:e.target.value});n(s(s({},o),{jsonData:r}))},t.onSaslUsernameChange=function(e){var a=t.props,n=a.onOptionsChange,o=a.options,r=s(s({},o.jsonData),{saslUsername:e.target.value});n(s(s({},o),{jsonData:r}))},t.onSaslPasswordChange=function(e){var a=t.props,n=a.onOptionsChange,o=a.options;n(s(s({},o),{secureJsonData:{saslPassword:e.target.value}}))},t.onResetSaslPassword=function(){var e=t.props,a=e.onOptionsChange,n=e.options;a(s(s({},n),{secureJsonFields:s(s({},n.secureJsonFields),{saslPassword:!1}),secureJsonData:s(s({},n.secureJsonData),{saslPassword:""})}))},t.onDebugChange=function(e){var a=t.props,n=a.onOptionsChange,o=a.options,r=s(s({},o.jsonData),{debug:e.target.value});n(s(s({},o),{jsonData:r}))},t.onHealthcheckTimeoutChange=function(e){var a=t.props,n=a.onOptionsChange,o=a.options,r=s(s({},o.jsonData),{healthcheckTimeout:parseFloat(e.target.value)});n(s(s({},o),{jsonData:r}))},t}return r(t,e),t.prototype.render=function(){var e=this.props.options,t=e.jsonData,a=e.secureJsonFields,n=e.secureJsonData||{};return m.a.createElement("div",{className:"gf-form-group"},m.a.createElement("div",{className:"gf-form"},m.a.createElement(f,{label:"Servers",labelWidth:11,onChange:this.onBootstrapServersChange,value:t.bootstrapServers||"",placeholder:"broker1:9092, broker2:9092",inputWidth:30})),m.a.createElement("div",{className:"gf-form"},m.a.createElement(f,{label:"Security Protocol",labelWidth:11,onChange:this.onSecurityProtocolChange,value:t.securityProtocol||"",placeholder:"<PLAINTEXT|SASL_SSL>"})),m.a.createElement("div",{className:"gf-form"},m.a.createElement(f,{label:"SASL Mechanisms",labelWidth:11,onChange:this.onSaslMechanismsChange,value:t.saslMechanisms||"",placeholder:"<PLAIN|SCRAM-SHA-512>"})),m.a.createElement("div",{className:"gf-form"},m.a.createElement(f,{label:"SASL Username",labelWidth:11,onChange:this.onSaslUsernameChange,value:t.saslUsername||"",placeholder:"<SASL Username>"})),m.a.createElement("div",{className:"gf-form-inline"},m.a.createElement("div",{className:"gf-form"},m.a.createElement(h,{isConfigured:a&&a.saslPassword,value:n.saslPassword||"",label:"SASL Password",placeholder:"<SASL Password>",labelWidth:11,inputWidth:20,onReset:this.onResetSaslPassword,onChange:this.onSaslPasswordChange}))),m.a.createElement("div",{className:"gf-form"},m.a.createElement(f,{label:"Debug",labelWidth:11,onChange:this.onDebugChange,value:t.debug||"",placeholder:"<librdkafka Debug Level>"})),m.a.createElement("div",{className:"gf-form"},m.a.createElement(f,{label:"Healthcheck Timeout (ms)",labelWidth:11,onChange:this.onHealthcheckTimeoutChange,value:t.healthcheckTimeout||2e3,type:"number",step:"1",min:"0"})))},t}(c.PureComponent),d=a(4);!function(e){e.EARLIEST="earliest",e.LATEST="latest"}(i||(i={})),function(e){e.Now="now",e.Message="message"}(l||(l={}));var v={partition:0,withStreaming:!0,autoOffsetReset:i.LATEST,timestampMode:l.Now},b=[{label:"From the last 100",value:i.EARLIEST,description:"Consume from the last 100 offset"},{label:"Latest",value:i.LATEST,description:"Consume from the latest offset"}],C=[{label:"Now",value:l.Now,description:"Current time while consuming the message"},{label:"Message Timestamp",value:l.Message,description:"The message timestamp while producing into topic"}],S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onTopicNameChange=function(e){var a=t.props,n=a.onChange,o=a.query,r=a.onRunQuery;n(s(s({},o),{topicName:e.target.value})),r()},t.onPartitionChange=function(e){var a=t.props,n=a.onChange,o=a.query,r=a.onRunQuery;n(s(s({},o),{partition:parseFloat(e.target.value)})),r()},t.onWithStreamingChange=function(e){var a=t.props,n=a.onChange,o=a.query,r=a.onRunQuery;n(s(s({},o),{withStreaming:e.currentTarget.checked})),r()},t.onAutoResetOffsetChanged=function(e){var a=t.props,n=a.onChange,o=a.query,r=a.onRunQuery;n(s(s({},o),{autoOffsetReset:e.value||i.LATEST})),r()},t.resolveAutoResetOffset=function(e){return e===i.LATEST?b[1]:b[0]},t.onTimestampModeChanged=function(e){var a=t.props,n=a.onChange,o=a.query,r=a.onRunQuery;n(s(s({},o),{timestampMode:e.value||l.Now})),r()},t.resolveTimestampMode=function(e){return e===l.Now?C[0]:C[1]},t}return r(t,e),t.prototype.render=function(){var e=Object(d.defaults)(this.props.query,v),t=e.topicName,a=e.partition,n=e.withStreaming,o=e.autoOffsetReset,r=e.timestampMode;return m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:"gf-form"},m.a.createElement(p.InlineFieldRow,null,m.a.createElement(p.InlineFormLabel,{width:10},"Topic"),m.a.createElement("input",{className:"gf-form-input width-14",value:t||"",onChange:this.onTopicNameChange,type:"text"}),m.a.createElement(p.InlineFormLabel,{width:10},"Partition"),m.a.createElement("input",{className:"gf-form-input width-14",value:a,onChange:this.onPartitionChange,type:"number",step:"1",min:"0"}),m.a.createElement(p.InlineFormLabel,null,"Enable streaming ",m.a.createElement("small",null,"(v8+)")),m.a.createElement("div",{className:"add-data-source-item-badge"},m.a.createElement(p.Switch,{css:!0,checked:n||!1,onChange:this.onWithStreamingChange})))),m.a.createElement("div",{className:"gf-form"},m.a.createElement(p.InlineFieldRow,null,m.a.createElement(p.InlineFormLabel,{className:"width-5",tooltip:"Starting offset to consume that can be from latest or last 100."},"Auto offset reset"),m.a.createElement("div",{className:"gf-form--has-input-icon"},m.a.createElement(p.Select,{className:"width-14",value:this.resolveAutoResetOffset(o),options:b,defaultValue:b[0],onChange:this.onAutoResetOffsetChanged})),m.a.createElement(p.InlineFormLabel,{tooltip:"Timestamp of the kafka value to visualize."},"Timestamp Mode"),m.a.createElement("div",{className:"gf-form--has-input-icon"},m.a.createElement(p.Select,{className:"width-14",value:this.resolveTimestampMode(r),options:C,defaultValue:C[0],onChange:this.onTimestampModeChanged})))))},t}(c.PureComponent);a.d(t,"plugin",(function(){return E}));var E=new n.DataSourcePlugin(u).setConfigEditor(g).setQueryEditor(S)}])}));
//# sourceMappingURL=module.js.map